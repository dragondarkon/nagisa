
$(function(){var e=$(".menu_left_panel");var f=$(".main-content");var d=$(".contain-logo");var b=$.cookie("left_menu_setting");var a="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImI3N2Q2OGVjN2MzYWYxYjE2ZDUxYTQyZGU2ZTA5NDgzZTZlNmJjMTU3ZTUwYzAzMmMyYWNiYzhhNjdlMmZlMDFjNzc0MjI0MDU2ZmJiYTM1In0.eyJhdWQiOiIxIiwianRpIjoiYjc3ZDY4ZWM3YzNhZjFiMTZkNTFhNDJkZTZlMDk0ODNlNmU2YmMxNTdlNTBjMDMyYzJhY2JjOGE2N2UyZmUwMWM3NzQyMjQwNTZmYmJhMzUiLCJpYXQiOjE1MDA2NjI4MzksIm5iZiI6MTUwMDY2MjgzOSwiZXhwIjoxNTMyMTk4ODM5LCJzdWIiOiI0Iiwic2NvcGVzIjpbIioiXX0.Tf3v-Dy_nmS-gEvy3wDYx5LwLRUkgjmTTgCBZvgQN0OFjTjHvk40VTxqIjo2tMgU4RQ6jjyqNqwA7wnCeFpRI0r5ze40xJhGkQ4Pz82-3Kaf9eZV9eKl3HEUtAFvFZjF8CP1Cq9ntjSZGcqeLowxbBdPiaRV1HFZ72CQsp7zt2vyyGUIaAncVHxxNMTfrllydLDxJBVdmRx5oepUTCsgwTHdEIMwBzZMOkAK4Is939o-Q_iZt-MFtB37ByIov7vSVCYLJIIi0K53L7D8UcWi0SX4ElGTN6GKecaef5-ZR0YHweATRVT0GVI6o67LfIV69pofX5uPdjBIl1YTjn9LmECGochTIKS82kqTDr87NkMgW3kQEbgGLEYJhec8kB4KXN_BIdwP4cwCHCvV4AxqD6CpFdA_F4Iez5MAHxkOaiFjhXVeqP9Oz-G7Mn5ypofPV4j0IuDRr3FmAFk22raDyfWdvCrj5QKZ0eaVke9Qh3r0rWMHCtaDnpZ5u0xeKkVLIh-ujssPyv51X3HYjEcdizNYal1wNRM8MSUchvaeHVJSOHybI379HhWs26ItE2brVwsrOXZD80AxI5UDUyJV73x0aiJVyMMbmXcfmCbBLNZFMlZClkbfCD9BDWJ2q44DgnOpaZgO-EYCLcXEN6_mP4CSOU7uBTO1lnT-cTvZdeQ";if(b==1){e.addClass("mini");d.addClass("mini");f.filter(":not(:animated)").animate({"padding-left":"70px"},"fast")}else{if(b===0){e.removeClass("mini");d.removeClass("mini");f.filter(":not(:animated)").animate({"padding-left":"238px"},"fast")}}$(".top_menu_bar").on("click",function(){e.toggleClass("mini");d.toggleClass("mini");if(e.hasClass("mini")){f.filter(":not(:animated)").animate({"padding-left":"70px"},"fast");$.cookie("left_menu_setting",1)}else{f.filter(":not(:animated)").animate({"padding-left":"238px"},"fast");$.cookie("left_menu_setting",0)}});$.ajaxSetup({headers:{Accept:"application/json","X-CSRF-TOKEN":$('meta[name="_token"]').attr("content"),"Content-Type":"application/x-www-form-urlencoded"},error:function(g){var i=g.responseJSON;var h="<ul>";$.each(i,function(j,k){h+="<li>"+k[0]+"</li>"});h+="</ul>";showNoti("error","Information",h,"fa fa-exclamation-circle","",true)}});$("#frmLogin").on("submit",function(j){j.preventDefault();var g=$(this);var h=$(this).find(".btn-ws-login");var k=h.html();var i=g.find('input[name="_token"]').val();$.ajax({url:"/api/login",type:"post",dataType:"json",data:g.serialize(),beforeSend:function(l){h.html("Submiting..");$.removeCookie("access_token");$.removeCookie("token_type");$.removeCookie("refresh_token")},success:function(l){if(l.status=="error"){}else{$.cookie.raw=true;$.cookie.json=false;$.cookie("access_token",l.access_token);$.cookie("token_type",l.token_type);$.cookie("refresh_token",l.refresh_token)}}});$.ajax({url:"/login",type:"post",dataType:"json",data:g.serialize(),success:function(m){if(m.status=="error"){var n=m.result;var l="<ul>";$.each(n,function(o,p){l+="<li>"+p+"</li>"});l+="</ul>";showNoti("error","Information",l,"fa fa-exclamation-circle","","")}else{showNoti("success","Successfully","You have login successfully. Access token has been generated.","","");window.location.href="/dashboard"}},complete:function(){h.html(k)}})});$("#frmForgot").on("submit",function(m){m.preventDefault();var g=$(this);var j=$(this).find(".btn-ws-resp");var n=j.html();var l=g.find('input[name="_token"]').val();var h=g.attr("data-callback");var k="POST";var i=$(this).button("loading");$.ajax({url:g.attr("action"),type:k,dataType:"json",data:g.serialize(),beforeSend:function(o){j.html("Submiting..")},success:function(o){if(o.status=="error"){showNoti("error",o.result," ","fa fa-exclamation-circle","");$(this).find("button[type='submit']").prop("disabled",false);i.button("reset")}else{showNoti("success","Successfully","Send link forgot password to email.","","");setTimeout(function(){window.location.href="/"},3600)}},complete:function(){j.html(n)}})});$("#frmreset").on("submit",function(l){l.preventDefault();var g=$(this);var i=$(this).find(".btn-ws-resp");var m=i.html();var k=g.find('input[name="_token"]').val();var h=g.attr("data-callback");var j="POST";$.ajax({url:g.attr("action"),type:j,dataType:"json",data:g.serialize(),beforeSend:function(n){i.html("Submiting..")},success:function(o){if(o.status=="error"){var p=o.result;var n="<ul>";$.each(p,function(q,r){n+="<li>"+r+"</li>"});n+="</ul>";showNoti("error","Information",n,"fa fa-exclamation-circle","","")}else{showNoti("success","Successfully","Your information has been saved.","","",true);setTimeout(function(){window.location.href="/dashboard"},3600)}},complete:function(){i.html(m)}})});$(".form-ajax").on("submit",function(l){l.preventDefault();var g=$(this);var i=$(this).find(".btn-ws-resp");var m=i.html();var k=g.find('input[name="_token"]').val();var h=g.attr("data-callback");var j=$(this).attr("data-method");$.ajax({url:g.attr("action"),type:j,dataType:"json",data:g.serialize(),headers:{Authorization:"Bearer "+a},beforeSend:function(n){i.html("Submiting..")},success:function(o){if(o.status=="error"){var p=o.result;var n="<ul>";$.each(p,function(q,r){n+="<li>"+r+"</li>"});n+="</ul>";showNoti("error","Information",n,"fa fa-exclamation-circle","",true)}else{showNoti("success","Successfully","Your information has been saved.","","",true);setTimeout(function(){window.location.href=h},3600)}},complete:function(){i.html(m)}})});$(document).on("click",".delete_func",function(){var h=$(this).attr("data-id");var g=$(this).attr("data-api");bootbox.confirm({title:"<img src='/assets/images/big_logo_tran.png' style='height: 35px' />",message:"Do you want to delete this row?",buttons:{confirm:{label:"Confirm",className:"btn-success"},cancel:{label:"No",className:"btn-danger"}},callback:function(i){if(i){$.ajax({url:g+h,type:"DELETE",dataType:"json",data:{},headers:{Authorization:"Bearer "+a},success:function(k){if(k.status=="error"){var l=k.result;var j="<ul>";$.each(l,function(m,n){j+="<li>"+n+"</li>"});j+="</ul>";showNoti("error","Information",j,"fa fa-exclamation-circle","",true)}else{showNoti("success","Successfully","This row has been deleted.","","",true);$('tr[data-id="table_'+h+'"]').fadeOut().remove()}}})}else{$(".modal").modal("hide");return false}}})});var c=$(".user_name");if($.cookie("access_token")){$.ajax({url:"/api/user",type:"GET",dataType:"json",headers:{Accept:"application/json",Authorization:"Bearer "+$.cookie("access_token")},data:{},beforeSend:function(){},success:function(g){if(g.status==="success"){c.html(g.result.first_name+" "+g.result.last_name)}}})}else{c.html("Guest")}});function showNoti(b,g,f,a,c,d){(typeof b==="undifinded"||b=="")?b="primary":"";(typeof g==="undifinded"||g=="")?g="System":"";(typeof f==="undifinded"||f=="")?f="loading information":"";(typeof a==="undifinded"||a=="")?a="fa fa-bell-o":"";(typeof c==="undifinded"||c=="")?c=3600:"";(typeof d==="undifinded"||d=="")?d=false:"";var e='<div class="ws-respon '+(d?"boxed":"")+" "+b+'">                         <div class="ws-inner">                             <div class="ws-icon"><i class="'+a+'" aria-hidden="true"></i></div>                             <div class="ws-text">                                 <div class="title">'+g+'</div>                                 <div class="text">'+f+'</div>                             </div>                             <div class="ws-close"><a href="javascript:;" onclick="closeNoti();"><i class="fa fa-times-circle" aria-hidden="true"></i></a></div>                         </div>                         </div>';if(d){if($(".ws-respon.boxed").length<=0){$(".respone-box").html(e);$(".ws-respon.boxed").slideDown("fast",function(){var h=$(this);setTimeout(function(){h.slideUp("fast",function(){h.remove()})},c)})}}else{if($(".ws-respon").length<=0){$(e).prependTo("body");$(".ws-respon").slideDown("fast",function(){var h=$(this);setTimeout(function(){h.slideUp("fast",function(){h.remove()})},c)})}}}function closeNoti(){$(".ws-respon").slideUp("fast",function(){$(this).remove()})};