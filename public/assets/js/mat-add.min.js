
function slugify(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}$(document).ready(function(){$("#group_filter").on("change",function(){var b=$(this).val();console.log(b);$(".wstable tr").each(function(){$(this).find("span").haseClass("g"+b).hide();console.log($(this).find("span"))})});$("#field_name").on("focusout",function(){var b=$("#field_name").val();$("#field_slug").val(slugify(b))});if(id>0){var a={async:true,crossDomain:true,url:"/api/mat/"+id,method:"GET",};$.ajax(a).done(function(b){var d=JSON.parse(b.result.field_option);var g;$.each(d,function(i,l){var k=$(".copy").clone().children();var j=parseInt($(".control-item").last().attr("data-id"));var m;m="cp_id_"+i;k.attr("data-id",i);k.find("select").attr("name","tag_value["+i+"][]");k.addClass("control-item");k.attr("id",m);k.find('[name="value[]"]').val(l.value);k.find('[name="text[]"]').val(l.text);var h='<input type="hidden" class="after_loop" for="'+m+'" value="'+l.tag_value+'" />';$(".after-add-more").append(k);$(".after-add-more").append(h);complie_select("#"+m+" .select_tag")});var c=JSON.parse(b.result.department);$('input[name="dp[pd]"][value="edit"]').attr("checked",c.pd=="edit"?true:false);$('input[name="dp[pd]"][value="view"]').attr("checked",c.pd=="view"?true:false);$('input[name="dp[pd]"][value="hide"]').attr("checked",c.pd=="hide"?true:false);$('input[name="dp[injection]"][value="edit"]').attr("checked",c.injection=="edit"?true:false);$('input[name="dp[injection]"][value="view"]').attr("checked",c.injection=="view"?true:false);$('input[name="dp[injection]"][value="hide"]').attr("checked",c.injection=="hide"||!c.injection?true:false);$('input[name="dp[extrusion]"][value="edit"]').attr("checked",c.extrusion=="edit"?true:false);$('input[name="dp[extrusion]"][value="view"]').attr("checked",c.extrusion=="view"?true:false);$('input[name="dp[extrusion]"][value="hide"]').attr("checked",c.extrusion=="hide"||!c.extrusion?true:false);$('input[name="dp[account]"][value="edit"]').attr("checked",c.account=="edit"?true:false);$('input[name="dp[account]"][value="view"]').attr("checked",c.account=="view"?true:false);$('input[name="dp[account]"][value="hide"]').attr("checked",c.account=="hide"||!c.account?true:false);$('input[name="dp[sourcing]"][value="edit"]').attr("checked",c.sourcing=="edit"?true:false);$('input[name="dp[sourcing]"][value="view"]').attr("checked",c.sourcing=="view"?true:false);$('input[name="dp[sourcing]"][value="hide"]').attr("checked",c.sourcing=="hide"||!c.sourcing?true:false);$("#field_name").val(b.result.field_name);$("#field_slug").val(b.result.field_slug);$('#field_type option[value="'+b.result.field_type+'"]').attr("selected","selected");$("#field_type").trigger("change");$('#group option[value="'+b.result.group+'"]').attr("selected","selected");$("#group").trigger("change");$("#input_length").val(b.result.input_length);$("#remark").val(b.result.remark);if(b.result.required>0){$("#some_id").attr("checked","checked")}var f=b.result.code_length;var e=f.split(",");$.each(e,function(h,i){setUse($("#"+i),false)})})}else{$('input[name="dp[pd]"][value="hide"]').attr("checked",true);$('input[name="dp[injection]"][value="hide"]').attr("checked",true);$('input[name="dp[extrusion]"][value="hide"]').attr("checked",true);$('input[name="dp[account]"][value="hide"]').attr("checked",true);$('input[name="dp[sourcing]"][value="hide"]').attr("checked",true)}$("#group").change(function(){var b=$(this).val();if(b==1||b==2){$(".code_length_panel").show()}else{$(".code_length_panel").hide()}$(".code_length_btn button:enabled").removeClass("active");$(".code_length_btn button:enabled").attr("aria-pressed",false);group=b;$.ajax({url:"/mat/getallcodelength",type:"POST",data:{group_id:b},dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),Accept:"application/json",},success:function(c){if(c.status=="success"){(c.result.d1||$("#d1").hasClass("active"))?$("#d1").attr("disabled",false):$("#d1").attr("disabled",true);(c.result.d2||$("#d2").hasClass("active"))?$("#d2").attr("disabled",false):$("#d2").attr("disabled",true);(c.result.d3||$("#d3").hasClass("active"))?$("#d3").attr("disabled",false):$("#d3").attr("disabled",true);(c.result.d4||$("#d4").hasClass("active"))?$("#d4").attr("disabled",false):$("#d4").attr("disabled",true);(c.result.d5||$("#d5").hasClass("active"))?$("#d5").attr("disabled",false):$("#d5").attr("disabled",true);(c.result.d6||$("#d6").hasClass("active"))?$("#d6").attr("disabled",false):$("#d6").attr("disabled",true);(c.result.d7||$("#d7").hasClass("active"))?$("#d7").attr("disabled",false):$("#d7").attr("disabled",true);(c.result.d8||$("#d8").hasClass("active"))?$("#d8").attr("disabled",false):$("#d8").attr("disabled",true);(c.result.d9||$("#d9").hasClass("active"))?$("#d9").attr("disabled",false):$("#d9").attr("disabled",true);(c.result.d10||$("#d10").hasClass("active"))?$("#d10").attr("disabled",false):$("#d10").attr("disabled",true);(c.result.d11||$("#d11").hasClass("active"))?$("#d11").attr("disabled",false):$("#d11").attr("disabled",true);(c.result.d12||$("#d12").hasClass("active"))?$("#d12").attr("disabled",false):$("#d12").attr("disabled",true);(c.result.d13||$("#d13").hasClass("active"))?$("#d13").attr("disabled",false):$("#d13").attr("disabled",true);(c.result.d14||$("#d14").hasClass("active"))?$("#d14").attr("disabled",false):$("#d14").attr("disabled",true);(c.result.d15||$("#d15").hasClass("active"))?$("#d15").attr("disabled",false):$("#d15").attr("disabled",true);(c.result.d16||$("#d16").hasClass("active"))?$("#d16").attr("disabled",false):$("#d16").attr("disabled",true);(c.result.d17||$("#d17").hasClass("active"))?$("#d17").attr("disabled",false):$("#d17").attr("disabled",true);(c.result.d18||$("#d18").hasClass("active"))?$("#d18").attr("disabled",false):$("#d18").attr("disabled",true);compile_val();compile_select_data();setTimeout(function(){var d=$(".after_loop");$.each(d,function(){var e=$(this).val();var f=$(this).attr("for");$("#"+f+" .select_tag").select2("val",[e.split(",")])})},1000)}else{console.log("false")}}})})});